<style>
  article::before {
    display: block;
    content: "Class=" attr(class);
    background: #eee;
  }
</style>
<script type=module defer>
  import {R,$} from '../r.js';
  
  const {attrskip,skip,safe} = R;

  const S = {
    attr: `<` + `script>alert('abc');<` + `/script>`,
    title: `<` + `script>alert('def');<` + `/script>`,
    content: `<` + `script>alert('ghi');<` + `/script>`
  };

  safeTests(S).to('body','beforeEnd');
  skipTests(S).to('body','beforeEnd');
  safeSkipTests(S).to('body','beforeEnd');

  function safeTests(s) {
    return $`${{key:'test1'}}
      Safe tests
      <article class="${safe(s.attr)} ${s.attr}">
        <h1>${safe(s.title)} ${s.title}</h1>
        <p>
          ${safe(s.content)} ${s.content}
        </p>
      </article>
    `;
  }


  function skipTests(s) {
    return $`${{key:'test2'}}
      Skip tests
      <article class="${attrskip(s.attr)} ${s.attr}">
        <h1>${skip(s.title)} ${s.title}</h1>
        <p>
          ${skip(s.content)} ${s.content}
        </p>
      </article>
    `;
  }

  function safeSkipTests(s) {
    return $`${{key:'test3'}}
      Skip safe tests
      <article class="${attrskip(safe(s.attr))} ${s.attr}">
        <h1>${skip(safe(s.title))} ${s.title}</h1>
        <p>
          ${skip(safe(s.content))} ${s.content}
        </p>
      </article>
      <s>Safe skip tests</s> (safe cannot wrap anything that's not a primitive)
      <article class="${(attrskip(s.attr))} ${s.attr}">
        <h1>${(skip(s.title))} ${s.title}</h1>
        <p>
          ${(skip(s.content))} ${s.content}
        </p>
      </article>
    `;
  }
</script>
